---
title: helm打包工具
date: 2023-02-20 16:07:59
category: 
  - 容器技术
  - kubernetes建设
tag: 
  - kubernetes
---

<!-- more -->

[[toc]]

## windows 安装 kubectl

> 官网地址：[https://kubernetes.io/zh-cn/docs/tasks/tools/install-kubectl-windows/](https://kubernetes.io/zh-cn/docs/tasks/tools/install-kubectl-windows/)

1. 下载地址：[https://storage.googleapis.com/kubernetes-release/release/v1.9.0/bin/windows/amd64/kubectl.exe](https://storage.googleapis.com/kubernetes-release/release/v1.9.0/bin/windows/amd64/kubectl.exe)
2. 设置环境变量 path
3. 配置

```text
配置 kubernetes config 文件，这个文件是你在 linux 服务器上使用 kubectl 与 kubernetes 交互的配置文件，我们只要在 linux 上找到 $HOME/.kube/config 文件将其复制到windows 的$HOME/.kube/config ,即可，我的位置是 C:\Users\admin\.kube\config
```

## 安装 Helm

> 下载地址：[https://github.com/helm/helm/releases](https://github.com/helm/helm/releases)
>
> windows 下载地址：[https://get.helm.sh/helm-v3.10.3-windows-amd64.zip](https://get.helm.sh/helm-v3.10.3-windows-amd64.zip)

## 常用命令

```bash
## 查看 helm 版本
helm version
## 查看当前仓库
helm repo list
## 增加仓库
helm repo add stable http://mirror.azure.cn/kubernetes/charts
helm repo add bitnami https://charts.bitnami.com/bitnami
helm repo add devops https://docker.devops.tr/bedrock/ --username='zhanghaijun' --password=12345

## 查询 bitnami 下的 charts
helm search repo bitnami
## 搜索 harbor 应用
helm search repo harbor
## 下载远程仓库jenkins应用到本地
helm pull bitnami/harbor

## 部署 bitnami/harbor 应用
helm install --name harbor bitnami/harbor --namespace=harbor --create-namespace
## 查看应用状态
helm status harbor

## 列出已部署的应用
helm list
## 删除应用版本
helm uninstall harbor
## 列出已删除的应用版本
helm ls --deleted

## 列出历史版本
helm history harbor
## 回退上一个版本
helm rollback harbor 1

```

## 自制 helm 应用

```bash
## 创建一个名为mychart的chart
helm create mychart
## 打包chart
helm package mychart/
## 上传chart
helm push mychart-0.1.0.tgz myrepo
helm-cm-push mychart-0.1.0.tgz https://docker.devops.tr/bedrock/ --username='zhanghaijun' --password=123456
```
