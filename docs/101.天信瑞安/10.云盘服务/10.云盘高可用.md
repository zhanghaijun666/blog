---
title: 云盘高可用
date: 2023-03-23
category: 
  - txra
  - 云盘服务
tag: 
  - 云盘服务
---

<!-- more -->

[[toc]]

## 目的

- 云盘的高可用
- 云盘服务整体不依赖单一节点

## 云盘服务

### 1. web 服务( Nginx )

> 主要完成静态资源和服务代理

### 2. 云盘服务 ( cloudserver )

> 云盘服务,完成云盘的业务逻辑

### 3. 文件编译 ( OnlyOffice )

> 为云盘提供在线预览文件, 在线编辑文件, 在线协同编辑文件

### 4. 消息队列 ( ActiveMQ )

> 主要解决云盘中异步时间处理, 提高请求响应时间, 增强用户体验

### 5. 缓存 ( Redis )

> 主要提供数据共享和数据缓存的能力
>
> 数据共享: 云盘节点的数据共享,例如用户登录信息, 系统配置信息
>
> 数据缓存: 提高热数据的快速查询

### 6. 搜索引擎 ( Solr )

> 主要提供文件检索的能力, 实现全局文件的快速检索

### 7. 数据一致性 ( Zookeeper )

> 为solr高可用,提供数据一致性的手段

### 8. 数据库 ( MariaDB )

> 为云盘服务提供结构化数据的持久化处理

### 9. 文件库 ( OSS)

> 为云盘提供非结构化文件数据的存储

![服务列表](./library/服务列表.png)

## 三节点部署

![架构图](./library/架构图.png)

## 优化部署

### 1. 容器化

> 容器化部署, 解决了服务的快速部署, 屏蔽服务对平台的差异性的感知

### 2. docker swarm

> 解决主机之间容器间的通信.
